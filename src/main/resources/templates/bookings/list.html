<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments/header :: header('Bookings')"></head>

<body>
<div class="container mt-4">

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold">
            Bookings for room: <span th:text="${room.roomName}"></span>
        </h2>

        <a th:href="@{|/rooms/${room.id}/bookings/create|}" class="btn btn-primary">
            ➕ Create Booking
        </a>
    </div>

    <table class="table table-striped table-bordered align-middle shadow-sm">
        <thead class="table-light">
        <tr>
            <th>#</th>
            <th>Booked By</th>
            <th>Start</th>
            <th>End</th>
            <th width="120">Actions</th>
        </tr>
        </thead>

        <tbody>
        <tr th:each="b : ${bookings}">
            <td th:text="${b.id}"></td>
            <td th:text="${b.bookedBy}"></td>
            <td th:text="${#temporals.format(b.startTime, 'yyyy-MM-dd HH:mm')}"></td>
            <td th:text="${#temporals.format(b.endTime, 'yyyy-MM-dd HH:mm')}"></td>

            <td>
                <form th:action="@{|/rooms/${room.id}/bookings/${b.id}/delete|}" method="post">
                    <button class="btn btn-sm btn-danger"
                            onclick="return confirm('Cancel this booking?')">
                        Delete
                    </button>
                </form>
            </td>
        </tr>

        <tr th:if="${bookings.size() == 0}">
            <td colspan="5" class="text-center text-muted py-4">
                No bookings yet.
            </td>
        </tr>
        </tbody>
    </table>

    <a th:href="@{|/workspaces/${room.workspace.id}/rooms|}" class="btn btn-secondary mt-3">
        ← Back to Rooms
    </a>

</div>

<div th:replace="fragments/footer :: footer"></div>
</body>
</html>
